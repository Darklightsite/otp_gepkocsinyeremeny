# ðŸš— OTP GÃ©pkocsinyeremÃ©ny - Premium KÃ¡rtya
# âš ï¸ CserÃ©ld le az entitÃ¡s neveket ha mÃ¡s nevet adtÃ¡l az integrÃ¡ciÃ³nak!

type: vertical-stack
cards:
  - type: custom:mushroom-template-card
    primary: "ðŸš— OTP GÃ©pkocsinyeremÃ©ny"
    secondary: >-
      {% set count = states('sensor.otp_betetek')|int(0) %}
      {% if count > 0 %}
        ðŸŽ‰ {{ count }} db nyeremÃ©ny!
      {% else %}
        {{ state_attr('sensor.otp_betetek', 'figyelt_db') | default(0) }} betÃ©t figyelve
      {% endif %}
    icon: >-
      {% if states('sensor.otp_betetek')|int(0) > 0 %}mdi:trophy{% else %}mdi:car-convertible{% endif %}
    icon_color: >-
      {% if states('sensor.otp_betetek')|int(0) > 0 %}amber{% else %}blue{% endif %}
    layout: horizontal
    tap_action:
      action: more-info
      entity: sensor.otp_betetek

  - type: custom:mushroom-chips-card
    chips:
      - type: template
        icon: mdi:ticket-outline
        icon_color: cyan
        content: "{{ state_attr('sensor.otp_betetek', 'figyelt_db') | default(0) }} db"
      - type: template
        icon: mdi:calendar-check
        icon_color: green
        content: "{{ state_attr('sensor.otp_betetek', 'utolso_sorsolas') | default('?') }}"
      - type: template
        icon: mdi:calendar-clock
        icon_color: orange
        content: "{{ state_attr('sensor.otp_betetek', 'kovetkezo_sorsolas') | default('?') }}"
      - type: entity
        entity: button.otp_betetek_adatbazis_frissitese
        icon_color: blue
        tap_action:
          action: toggle
        content_info: none
    alignment: center

  - type: conditional
    conditions:
      - entity: sensor.otp_betetek
        state_not: "0"
    card:
      type: custom:mushroom-template-card
      primary: "ðŸ† Nyertes BetÃ©tek!"
      secondary: >-
        {% set items = state_attr('sensor.otp_betetek', 'nyertes_reszletek') %}
        {% if items %}
          {% for item in items %}
          ðŸŽ« {{ item.szam }}{% if item.auto %} â†’ {{ item.auto }}{% endif %}
          {% endfor %}
        {% endif %}
      icon: mdi:party-popper
      icon_color: amber
      layout: vertical
      multiline_secondary: true
