type: custom:mushroom-template-card
primary: OTP GÃ©pkocsinyeremÃ©ny
secondary: >-
  {% if states('sensor.otp_nyeremenyek')|int > 0 %}
  ğŸ‰ NYERTÃ‰L! {{ states('sensor.otp_nyeremenyek') }} db nyertes betÃ©t!
  {% else %}
  Nincs nyeremÃ©ny a figyelt betÃ©tek kÃ¶zÃ¶tt
  {% endif %}
icon: mdi:car-sports
icon_color: >-
  {% if states('sensor.otp_nyeremenyek')|int > 0 %}green{% else %}blue{% endif %}
fill_container: true
tap_action:
  action: more-info
card_mod:
  style: |
    ha-card {
      background: linear-gradient(135deg, {% if states('sensor.otp_nyeremenyek')|int > 0 %}rgba(76, 175, 80, 0.15){% else %}rgba(33, 150, 243, 0.1){% endif %} 0%, transparent 100%);
      border-left: 3px solid {% if states('sensor.otp_nyeremenyek')|int > 0 %}var(--green-color){% else %}var(--blue-color){% endif %};
    }

---

type: markdown
content: >
  {% set nyertes = state_attr('sensor.otp_nyeremenyek', 'nyertes_reszletek') %}
  {% set history = state_attr('sensor.otp_nyeremenyek', 'nyeremeny_tortenelem') %}

  {% if nyertes and nyertes|length > 0 %}
  ### ğŸ† Jelenlegi nyertes betÃ©tek

  {% for item in nyertes %}
  - **{{ item.szam }}**{% if item.auto %} â†’ ğŸš— *{{ item.auto }}*{% endif %}
  {% endfor %}

  ---
  {% endif %}

  ### ğŸ“Š RÃ©szletek

  | | |
  |:--|:--|
  | ğŸ”¢ **Figyelt betÃ©tek** | {{ state_attr('sensor.otp_nyeremenyek', 'figyelt_db') }} db |
  | ğŸ“… **UtolsÃ³ sorsolÃ¡s** | {{ state_attr('sensor.otp_nyeremenyek', 'utolso_sorsolas') }} |
  | â³ **KÃ¶vetkezÅ‘ sorsolÃ¡s** | {{ state_attr('sensor.otp_nyeremenyek', 'kovetkezo_sorsolas') }} |
  | ğŸ”„ **FrissÃ­tve** | {{ as_timestamp(states.sensor.otp_nyeremenyek.last_updated) | timestamp_custom('%Y.%m.%d %H:%M') }} |

  {% if history and history|length > 0 %}
  ---

  ### ğŸ“œ KorÃ¡bbi nyeremÃ©nyek

  {% for item in history %}
  - {{ item.datum }}: **{{ item.szam }}**{% if item.auto %} â†’ ğŸš— *{{ item.auto }}*{% endif %}
  {% endfor %}
  {% else %}
  ---

  *MÃ©g nem volt nyeremÃ©ny a figyelt szÃ¡mok kÃ¶zÃ¶tt.*
  {% endif %}

  ---
  <sub>Adatok: OTP Bank hivatalos oldala</sub>
card_mod:
  style: |
    ha-card {
      background: var(--card-background-color);
      border-radius: 12px;
    }
    table {
      width: 100%;
    }
    td {
      padding: 4px 8px;
    }